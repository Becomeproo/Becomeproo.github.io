---
title:  "[Android] Part1-ë‹¨ìœ„ ë³€í™˜ê¸° ì•±"

categories:
  - Android
tags:
  - [Android, Kotlin, ì•ˆë“œë¡œì´ë“œ ê°•ì˜]

toc: true
toc_sticky: true
 
date: 2023-01-10
last_modified_at: 2023-01-10
---

<br>
<br>
<br>

> ì•„ë˜ ë‚´ìš©ì€ íŒ¨ìŠ¤íŠ¸ ìº í¼ìŠ¤ [35ê°œ í”„ë¡œì íŠ¸ë¡œ ë°°ìš°ëŠ” Android ì•± ê°œë°œ feat. Jetpack Compose]ì˜ ê°•ì˜ ë‚´ìš©ì„ ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±í•œ ììŠµ ê¸°ë¡ì…ë‹ˆë‹¤.

<br><br>

# ğŸ“šë‹¨ìœ„ ë³€í™˜ê¸° ì•±

## â„¹ï¸ì•± ì„¤ëª…

ë¯¸í„°(m)ì™€ ì„¼í‹°ë¯¸í„°(cm) ê°„ ë‹¨ìœ„ë¥¼ ë³€í™˜ì‹œì¼œ ì£¼ëŠ” ì•±. ë³€í™˜ì„ ì›í•˜ëŠ” ê°’ì„ ì…ë ¥í•˜ë©´, ì•„ë˜ ë³€í™˜ëœ ê°’ì„ ë…¸ì¶œì‹œí‚¤ëŠ” ì•±.

<br>

## âœ…êµ¬í˜„ ê¸°ëŠ¥

* ìƒë‹¨ ë¶€ë¶„ì— ë³€í™˜ë˜ê¸¸ ì›í•˜ëŠ” ê°’ ì…ë ¥.
* í•˜ë‹¨ ë¶€ë¶„ì— ë³€í™˜ëœ ê°’ ì¶œë ¥.
* `ë°”ê¾¸ê¸°` ì´ë¯¸ì§€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ë‘ ë‹¨ìœ„ì˜ ê°’ì„ ë³€í™˜. ex) cm -> m, m -> cm

<br>

## âœ…ì‚¬ìš©ë˜ëŠ” ê¸°ëŠ¥

* UI
   * ConstraintLayout
   * EditText

* Android
    * ViewBinding
    * onSaveInstanceState

---

<br>

## ğŸ“”UI êµ¬í˜„

ë‹¨ìœ„ ë³€í™˜ê¸° ì•±ì€ ConstraintLayoutì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬í˜„í•  ê²ƒì´ë‹¤. í”„ë¡œì íŠ¸ë¥¼ ìƒì„±í•˜ìë§ˆì ConstraintLayoutì´ ì„¤ì •ëœ ê¸°ë³¸ í™”ë©´ì„ ë³¼ ìˆ˜ ìˆë‹¤. ConstraintLayoutì— ëŒ€í•´ì„œ ë‚˜ì¤‘ì— ìì„¸íˆ ë‹¤ë£¨ì–´ë³´ë„ë¡ í•˜ì.

```kotlin
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

</androidx.constraintlayout.widget.ConstraintLayout>
```

UIëŠ” ë‹¨ìœ„ë¥¼ ì…ë ¥í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ì…ë ¥ ë¶€ë¶„ì—ëŠ” EditTextë¥¼ ìƒë‹¨ì— ë°°ì¹˜í•˜ì˜€ê³ , í•˜ë‹¨ì—ëŠ” ë³€í™˜ëœ ê²°ê´ê°’ì„ ì¶œë ¥í•´ì•¼ í•˜ë¯€ë¡œ TextViewë¥¼ ì§€ì •í•˜ì˜€ë‹¤. ê·¸ë¦¬ê³  ê°ê°ì˜ View ì˜†ì— ë‹¨ìœ„ë¥¼ í‘œì‹œí•˜ëŠ” TextView 2ê°œë¥¼ í‘œì‹œí•˜ì˜€ë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ, í´ë¦­í•˜ì˜€ì„ ë•Œ ë‘ ë‹¨ìœ„ë¥¼ ë°”ê¾¸ëŠ” ImageButtonì„ ì¶”ê°€í•˜ì˜€ë‹¤.

### ğŸ“–activity_main.xml
```kotlin
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <EditText
        android:id="@+id/inputEditText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:gravity="end"
        android:hint="ìì—°ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."
        android:inputType="number"
        android:maxLength="7"
        android:textColor="@color/purple_700"
        android:textColorHint="@color/purple_200"
        android:textStyle="italic"
        app:layout_constraintBottom_toTopOf="@id/outputTextView"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.3"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintVertical_chainStyle="packed" />

    <TextView
        android:id="@+id/outputTextView"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="30dp"
        android:gravity="end"
        android:text="100"
        android:textColor="@color/black"
        android:textSize="30sp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="@id/inputEditText"
        app:layout_constraintStart_toStartOf="@id/inputEditText"
        app:layout_constraintTop_toBottomOf="@+id/inputEditText" />

    <TextView
        android:id="@+id/inputUnitTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:text="cm"
        android:textSize="20sp"
        app:layout_constraintBaseline_toBaselineOf="@id/inputEditText"
        app:layout_constraintStart_toEndOf="@id/inputEditText"
        app:layout_constraintTop_toTopOf="@id/inputEditText" />

    <TextView
        android:id="@+id/outputUnitTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:text="m"
        android:textSize="20sp"
        app:layout_constraintBaseline_toBaselineOf="@id/outputTextView"
        app:layout_constraintStart_toEndOf="@id/outputTextView" />

    <ImageButton
        android:id="@+id/swapImageButton"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginStart="16dp"
        android:backgroundTint="#ffffffff"
        android:src="@drawable/ic_baseline_swap_vert_36"
        app:layout_constraintBottom_toBottomOf="@id/outputTextView"
        app:layout_constraintStart_toEndOf="@id/inputUnitTextView"
        app:layout_constraintTop_toTopOf="@id/inputEditText" />

</androidx.constraintlayout.widget.ConstraintLayout>
```

ìœ„ì˜ ì½”ë“œì˜ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.

![ui_result](/assets/imges/fastcampus/part1/unit_transducers/ui_result.png)
<br>

ì œì•½ ì¡°ê±´ì„ ì„¤ì •í•¨ì— ìˆì–´ì„œ ê°ê°ì˜ viewëŠ” í•„ìˆ˜ì ìœ¼ë¡œ id ê°’ì„ ê°–ê³  ìˆì–´ì•¼ í•œë‹¤. id ê°’ì´ ì—†ë‹¤ë©´ viewë“¤ì„ êµ¬ë¶„í•  ìˆ˜ ì—†ì–´ ë°°ì¹˜í•˜ê¸°ê°€ ì–´ë µë‹¤.

---

<br>

## ğŸ“”ViewBinding

ì´ë²ˆ í”„ë¡œì íŠ¸ëŠ” findViewByIdë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šê³  viewBindingì„ ì´ìš©í•˜ì˜€ë‹¤.

viewBindingì€ findViewByIdì™€ ë¹„êµí•´ ë‹¤ìŒê³¼ ê°™ì€ ì¥ì ì„ ê°€ì§„ë‹¤.

### ğŸ“–ViewBindingì˜ ì¥ì 
1. Null ì•ˆì •ì„±: findViewByIdì—ì„œëŠ” ìœ íš¨í•˜ì§€ ì•Šì€ idë¥¼ ì‚¬ìš©í–ˆì„ ë•Œ NullExceptionì´ ë°œìƒí•˜ëŠ”ë°, viewBindingì€ ë°”ì¸ë”©ì´ ê°ê°ì˜ ë ˆì´ì•„ì›ƒì— 1ëŒ€ 1ë¡œ í• ë‹¹ë˜ê¸° ë•Œë¬¸ì— ì´ëŸ° ì˜¤ë¥˜ê°€ ë°œìƒí•  ì¼ì´ ì—†ë‹¤.
2. Type ì•ˆì •ì„±: findViewByIdì—ì„œëŠ” í•´ë‹¹ idì˜ íƒ€ì…ì„ ì˜ëª» ì…ë ¥í•´ì„œ ì‚¬ìš©í–ˆì„ ë•Œ ì˜¤ë¥˜ê°€ CastExceptionì´ ë°œìƒí•˜ì§€ë§Œ, viewBindingì—ì„œëŠ” ì´ëŸ¬í•œ ì˜¤ë¥˜ê°€ ë°œìƒí•  ìˆ˜ ì—†ë‹¤.
3. ì†ë„ê°€ ë¹ ë¥´ë‹¤.

<br>

ì´ì œ viewBindingì„ ì‚¬ìš©í•´ë³´ì.

> ì•„ë˜ ê³¼ì •ì€ [**ì•ˆë“œë¡œì´ë“œ developer ê³µì‹ë¬¸ì„œ**](https://developer.android.com/topic/libraries/view-binding?hl=ko)ì˜ ê³¼ì •ì„ ì°¸ê³ í•˜ì˜€ë‹¤.

<br>

ë¨¼ì € build.gradle(module) íŒŒì¼ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì½”ë“œë¥¼ ì¶”ê°€í•œ í›„ syncë¥¼ í•œë‹¤.

### ğŸ“–build.gradle(module)
```kotlin
android {

    ...

    viewBinding {
        enabled = true
    }
}
```

ê·¸ë¦¬ê³  í´ë˜ìŠ¤ íŒŒì¼ê³¼ ì™€ì„œ ë‹¤ìŒì˜ ìˆœì„œë¥¼ ë”°ë¥¸ë‹¤.
1. onCreate() ë©”ì„œë“œì—ì„œ ìƒì„±ëœ ë°”ì¸ë”© í´ë˜ìŠ¤ì— í¬í•¨ëœ inflate() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤.
2. getRoot() ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ê±°ë‚˜ Kotlin ì†ì„± êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ë£¨íŠ¸ ë·° ì°¸ì¡°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.
3. ë£¨íŠ¸ ë·°ë¥¼ setContentView()ì— ì „ë‹¬í•˜ì—¬ í™”ë©´ìƒì˜ í™œì„± ë·°ë¡œ ë§Œë“ ë‹¤.

### ğŸ“–MainActivity.kt
```kotlin
private lateinit var binding: ActivityMainBinding
```
ë°”ì¸ë”© ë³€ìˆ˜ë¥¼ ë¨¼ì € ì„ ì–¸í•´ ì£¼ì—ˆë‹¤. ë·° ë°”ì¸ë”©ì„ í—ˆìš©í–ˆê¸° ë•Œë¬¸ì— `ActivityMainBinding`ì™€ ê°™ì´ ë°”ì¸ë”©ì„ ìœ„í•œ í´ë˜ìŠ¤ê°€ ìƒì„±ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. ì´ë•Œ, lateinit í‚¤ì›Œë“œë¡œ ì§€ì—° ì´ˆê¸°í™”ë¥¼ í•´ì£¼ì—ˆëŠ”ë°, ì´ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•  ë•Œì—ëŠ” íƒ€ì…ì´ ë°˜ë“œì‹œ ëª…ì‹œë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.

```kotlin
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)

    // binding ë³€ìˆ˜ì— ì¸ìŠ¤í„´ìŠ¤ í• ë‹¹
    binding = ActivityMainBinding.inflate(layoutInflater)
    val view = binding.root
    setContentView(view)
}
```

ì´ë ‡ê²Œ í•˜ë©´ viewBindingì„ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì¤€ë¹„ê°€ ëë‚¬ë‹¤.

```kotlin
val outputTextView = binding.outputTextView
val outputUnitTextView = binding.outputUnitTextView
val inputEditText = binding.inputEditText
val inputUnitTextView = binding.inputUnitTextView
val swapImageButton = binding.swapImageButton
```

viewì— ì ‘ê·¼í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ì´ `binding.~`ì„ ì‚¬ìš©í•´ì„œ viewì— ì ‘ê·¼í•  ìˆ˜ ìˆë‹¤.

---

<br>

## ğŸ“”ê¸°ëŠ¥ êµ¬í˜„ - ë‹¨ìœ„ ë³€í™˜

ë¨¼ì € `inputEditText.addTextChangedListener{}` ë¥¼ ì‚¬ìš©í•´ ë³€í™˜í•˜ê³ ì í•˜ëŠ” ê°’ì´ ì…ë ¥ë  ë•Œë§ˆë‹¤ ê¸°ëŠ¥ì„ ìˆ˜í–‰í•˜ë„ë¡ ì„¤ì •í•˜ê³  ë¡œê·¸ë¥¼ ì°ì–´ ì˜ ì…ë ¥ë˜ì—ˆëŠ”ì§€ í™•ì¸í•´ ë³´ì•˜ë‹¤.

### ğŸ“–MainActivity.kt
```kotlin
inputEditText.addTextChangedListener{ text -> 
    inputNumber = text.toString().toInt()
    Log.d("inputNumber", inputNumber.toString())
}
```

ì…ë ¥ê°’ì´ ì˜ ë“¤ì–´ê°€ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.
![log](/assets/imges/fastcampus/part1/unit_transducers/input_number_log.png)

---

<br>


### âš ï¸ì˜¤ë¥˜
ì…ë ¥ì„ ê³„ì†í•´ì„œ í™•ì¸í•˜ë˜ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ë°, ì˜¤ë¥˜ì˜ ë‚´ìš©ì€ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.
![NumberFormatException](/assets/imges/fastcampus/part1/unit_transducers/error_number_format.png)

ì˜¤ë¥˜ëŠ” NumberFormatExceptionìœ¼ë¡œ í•´ë‹¹ ë‚´ìš©ì—ì„œëŠ” ìœ„ì˜
```kotlin
inputNumber = text.toString().toInt()
```
ë¬¸ì¥ì—ì„œ toInt()ë¥¼ í†µí•´ Stringì„ Int íƒ€ì…ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí•œ ê²ƒ ê°™ë‹¤. Integer ìë£Œí˜•ì˜ í‘œí˜„ ê°€ëŠ¥ ë²”ìœ„ëŠ” `-2147483648`~`2147483647`ì´ë‹¤. ì¦‰, ì…ë ¥ê°’ì´ Integer ìë£Œí˜•ì´ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ë¥¼ ì´ˆê³¼í–ˆê¸° ë•Œë¬¸ì— ë°œìƒí•œ ì˜¤ë¥˜ì¸ ê²ƒì´ë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `try ~ catch`êµ¬ë¬¸ì„ ì‚¬ìš©í•˜ì—¬ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬í•´ ì¤„ ìˆ˜ ìˆì§€ë§Œ, ë” ì‰¬ìš´ ë°©ë²•ìœ¼ë¡œ í•´ê²°í•˜ì˜€ë‹¤.

EditTextì˜ ì†ì„±ê°’ì„ í™œìš©í•´ì„œ ì´ ì˜¤ë¥˜ë¥¼ í•´ê²°í•  ìˆ˜ ìˆë‹¤. `android:maxLength` ì†ì„±ê°’ì€ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ì˜ ìµœëŒ€ ìë¦¿ìˆ˜ë¥¼ ì„¤ì •í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ”ë°, ì—¬ê¸°ì„œ Integer ìë£Œí˜•ì˜ ë²”ìœ„ë¥¼ ë„˜ì§€ ì•Šë„ë¡ 7ë¡œ ê°’ì„ ì„¤ì •í•´ ì£¼ì—ˆë‹¤. 9ê°€ ì•„ë‹Œ 7ë¡œ ì„¤ì •í•œ ì´ìœ ëŠ” ë‚˜ì¤‘ì— ì´ë¯¸ì§€ ë²„íŠ¼ì„ ëˆŒëŸ¬ ë‹¨ìœ„ë¥¼ ì„œë¡œ ë°”ê¾¸ì–´ ì£¼ëŠ” ë° ìˆì–´ m -> cmë¡œ ë³€í™˜ì‹œì— cm ê°’ì€ 100ì„ ê³±í•´ì£¼ì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— 9ë¡œ ì„¤ì •í–ˆì„ ê²½ìš° ë˜ë‹¤ì‹œ Integer ìë£Œí˜•ì˜ ë²”ìœ„ë¥¼ ì´ˆê³¼í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì´ë‹¤.

#### activity_main.xml
```kotlin
<EditText
    ...
    android:maxLength="7"
    ... 
/>
```

ê°’ì„ ë³€ê²½í•˜ê³  ë‚œ í›„ ì‹¤í–‰í•´ ë³´ë‹ˆ ì…ë ¥í•  ìˆ˜ ìˆëŠ” ë²”ìœ„ê°€ 9ìë¦¬ë¥¼ ì´ˆê³¼í•˜ì§€ ì•Šë„ë¡ ì„¤ì •ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

![NumberFormatException_resolve](/assets/imges/fastcampus/part1/unit_transducers/number_format_resolve.jpg)

í•´ë‹¹ ì˜¤ë¥˜ë¥¼ í•´ê²°í•˜ê³  ë‚˜ë‹ˆ ë˜ ë‹¤ë¥¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆëŠ”ë°, ì´ë²ˆì—ëŠ” ë‹¤ë¥¸ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆë‹¤.

### âš ï¸ì˜¤ë¥˜
ì´ë²ˆì—ë„ ì˜¤ë¥˜ì˜ ë‚´ìš©ì€ `NumberFormatException`ì´ì—ˆëŠ”ë° ì˜¤ë¥˜ì˜ ë‚´ìš©ì´ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤.
```
java.lang.NumberFormatException: For input string: ""
```
ì…ë ¥í•œ ë’¤ ì§€ìš°ë‹¤ê°€ ë¹ˆ ê°’ì´ ë˜ì—ˆì„ ë•Œ ë°œìƒí•˜ëŠ” ì˜¤ë¥˜ì˜€ëŠ”ë°, ì´ ê³¼ì •ì—ì„œ ìˆ«ìë¡œ ë³€í™˜í•  ìˆ˜ ì—†ê¸° ë•Œë¬¸ì— ë°œìƒí•œ ë“¯í•˜ë‹¤. ì´ë¥¼ ìœ„í•´ ê°’ì„ ì…ë ¥í•˜ëŠ” ê³¼ì •ì—ì„œ null ì²´í¬ë¥¼ í•˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤.

```kotlin
inputEditText.addTextChangedListener { text ->
    inputNumber = if (text.isNullOrEmpty()) {
        0
    } else {
        text.toString().toInt()
    }
    Log.d("inputNumber", inputNumber.toString())
}
```
ì´í›„ ë‹¤ì‹œ ì‹¤í–‰ì„ í•´ë³´ë‹ˆ ì˜¤ë¥˜ê°€ í•´ê²°ëœ ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

---

ë‹¤ì‹œ ëŒì•„ì™€ì„œ, ë³€í™˜ëœ ê²°ê´ê°’ì„ ë³´ì—¬ì£¼ê¸° ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì´ `outputNumber`ë¼ëŠ” ë³€ìˆ˜ë¥¼ ìƒì„±í•˜ì˜€ê³ , ì—¬ê¸°ì— ë³€í™˜ëœ ê°’ì„ ë„£ì–´ `outputTextView`ì— ê°’ì„ ë„ìš°ë„ë¡ í–ˆë‹¤.
```kotlin
var outputNumber = inputNumber.times(0.01)
outputTextView.text = outputNumber.toString()
```

ê·¸ë¦¬ê³  cm -> më¡œì˜ ë³€í™˜ì¸ì§€, ì•„ë‹ˆë©´ ê·¸ ë°˜ëŒ€ ê²½ìš°ì¸ì§€ë¥¼ êµ¬ë¶„í•˜ê¸° ìœ„í•´ `cmToM`ë¼ëŠ” ë³€ìˆ˜ë¥¼ ìƒì„±í•˜ì˜€ê³  ê¸°ë³¸ê°’ìœ¼ë¡œ `true`ë¥¼ ì§€ì •í•´ ì£¼ì—ˆë‹¤.
```kotlin
var cmToM = true
```

ì´í›„ ë‹¨ìœ„ ë³€í™˜ `ImageButton`ì´ ëˆŒë ¸ì„ ë•Œë§ˆë‹¤ ë‘ ë‹¨ìœ„ê°€ ì„œë¡œ ë°”ë€Œê¸° ë•Œë¬¸ì— Booleanìœ¼ë¡œ ì„¤ì •ëœ `cmToM`ì˜ ê°’ì„ `not()` í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ë³€ê²½ë˜ë„ë¡ í•´ì£¼ì—ˆê³ , ì´ë•Œ ê°ê°ì˜ ë‹¨ìœ„ì— ë§ê²Œ ë³´ì´ëŠ” ê°’ë“¤ ë˜í•œ ë³€ê²½ë  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì—ˆë‹¤. ë˜í•œ ì•ì„œ ì‘ì„±í–ˆë˜ `outputNumber` ë³€ìˆ˜ëŠ” ê³„ì‚°ì‹ì´ ì¤‘ë³µì´ ë˜ê¸° ë•Œë¬¸ì— ì§€ìš´ ë’¤, ë³€í™˜ì´ ëœ ë’¤ì—ë„ ë³€í™˜ëœ ê°’ìœ¼ë¡œ ì…ë ¥ì„ ê³„ì†í•´ì„œ í•  ìˆ˜ ìˆë„ë¡ í•´ë‹¹ êµ¬ë¬¸ì— ë³€í™˜ì´ êµ¬í˜„ë˜ëŠ” ì½”ë“œë¥¼ ì¶”ê°€í•´ ì£¼ì—ˆë‹¤.
```kotlin

inputEditText.addTextChangedListener { text ->
    inputNumber = if (text.isNullOrEmpty()) {
        0
    } else {
        text.toString().toInt()
    }
    
    if(cmToM) {
        outputTextView.text = inputNumber.times(0.01).toString()
    } else {
        outputTextView.text = inputNumber.times(100).toString()
    }
}

swapImageButton.setOnClickListener {
    cmToM = cmToM.not()
    if (cmToM) {
        inputUnitTextView.text = "cm"
        outputUnitTextView.text = "m"
        outputTextView.text = inputNumber.times(0.01).toString()
    } else {
        inputUnitTextView.text = "m"
        outputUnitTextView.text = "cm"
        outputTextView.text = inputNumber.times(100).toString()
    }
}
```

ê°ê° ì˜ êµ¬í˜„ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 
<br>
![result_cmtom](/assets/imges/fastcampus/part1/unit_transducers/result_cmtom.jpg)
![result_mtocm](/assets/imges/fastcampus/part1/unit_transducers/result_mtocm.jpg)

---

## ğŸ“”ê¸°ëŠ¥ êµ¬í˜„ - í™”ë©´ì „í™˜ ì‹œ ë°ì´í„° ìœ ì§€
ë§ˆì§€ë§‰ìœ¼ë¡œ í™”ë©´ ì „í™˜ ì‹œì—ë„ ê°’ì´ ìœ ì§€ë  ìˆ˜ ìˆë„ë¡ í•´ë³´ì. ì €ë²ˆê³¼ ë§ˆì°¬ê°€ì§€ë¡œ `onSaveInstanceState()`ë¥¼ í™œìš©í•œë‹¤. ë‹¤ë§Œ ì´ë²ˆì—ëŠ” ë°ì´í„°ë¥¼ ë³µì›í•  ë•Œ `onCreate()`ì—ì„œ ì €ì¥ëœ Bundle ê°’ì„ í™œìš©í•´ì„œ ê°€ì ¸ì™€ ë³µì›í–ˆë˜ ê²ƒê³¼ëŠ” ë‹¬ë¦¬, `onRestoreInstanceState()`ë¥¼ í™œìš©í•´ì„œ ë³µì›í•´ ë³´ë„ë¡ í•œë‹¤.

`onRestoreInstanceState()`ëŠ” `onStart()` ë©”ì„œë“œ ë‹¤ìŒì— í˜¸ì¶œë˜ë©°, ë³µì›í•  ì €ì¥ ìƒíƒœê°€ ìˆì„ ê²½ìš°ì— í•´ë‹¹ ë©”ì„œë“œë¥¼ í˜¸ì¶œí•œë‹¤. ë”°ë¼ì„œ ì €ë²ˆì²˜ëŸ¼ Bundleì´ nullì¸ì§€ í™•ì¸í•  í•„ìš”ê°€ ì—†ë‹¤.

> [Android Developer ê³µì‹ë¬¸ì„œ ì°¸ê³ ](https://developer.android.com/topic/libraries/architecture/saving-states)

ë¨¼ì € `onSaveInstanceState()`ë¥¼ ì‚¬ìš©í•˜ì—¬ ì €ì¥í•  ê°’ì„ ì§€ì •í•´ ì£¼ì—ˆë‹¤. ì—¬ê¸°ì„œëŠ” `cmToM`ê°’ì´ ìœ ì§€ê°€ ë˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ì €ì¥ì‹œì¼œ ì£¼ì—ˆë‹¤.
```kotlin
override fun onSaveInstanceState(outState: Bundle) {
    outState.putBoolean("cmToM", cmToM)
    super.onSaveInstanceState(outState)
}
```

ì´í›„ `onRestoreInstanceState()`ë¥¼ ì‚¬ìš©í•´ ì €ì¥ëœ ê°’ì„ ë¶ˆëŸ¬ì™”ë‹¤. `cmToM`ê°’ ì´ì™¸ì—ë„ í•´ë‹¹ ê°’ì— ì˜í–¥ì„ ë°›ëŠ” `inputUnitTextView`ì™€ `outputTextView`ê°’ ë˜í•œ ì €ì¥ëœ ê°’ì— ë”°ë¼ ì„¤ì •ë  ìˆ˜ ìˆë„ë¡ ì ìš©ì‹œì¼œ ì£¼ì—ˆë‹¤.

```kotlin
override fun onRestoreInstanceState(savedInstanceState: Bundle) {
    cmToM = savedInstanceState.getBoolean("cmToM")
    binding.inputUnitTextView.text = if(cmToM) "cm" else "m"
    binding.outputUnitTextView.text = if(cmToM) "m" else "cm"
    super.onRestoreInstanceState(savedInstanceState)
}
```

ìœ„ ì½”ë“œë“¤ì„ ì¶”ê°€í•˜ê³  ì‹¤í–‰ì‹œì¼œë³´ë‹ˆ ê°’ì´ ì˜ ìœ ì§€ë˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì—ˆë‹¤.

![result_vertical](/assets/imges/fastcampus/part1/unit_transducers/result_v.jpg)

![result_horizontal](/assets/imges/fastcampus/part1/unit_transducers/result_h.jpg)

---

## ğŸ“”ì „ì²´ ì½”ë“œ
### ğŸ“–activity_main.xml
```kotlin
<?xml version="1.0" encoding="utf-8"?>
<androidx.constraintlayout.widget.ConstraintLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <EditText
        android:id="@+id/inputEditText"
        android:layout_width="200dp"
        android:layout_height="wrap_content"
        android:gravity="end"
        android:hint="ìì—°ìˆ˜ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”."
        android:inputType="number"
        android:maxLength="7"
        android:textColor="@color/purple_700"
        android:textColorHint="@color/purple_200"
        android:textStyle="italic"
        app:layout_constraintBottom_toTopOf="@id/outputTextView"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintHorizontal_bias="0.3"
        app:layout_constraintStart_toStartOf="parent"
        app:layout_constraintTop_toTopOf="parent"
        app:layout_constraintVertical_chainStyle="packed" />

    <TextView
        android:id="@+id/outputTextView"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_marginTop="30dp"
        android:gravity="end"
        android:text="0"
        android:textColor="@color/black"
        android:textSize="30sp"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="@id/inputEditText"
        app:layout_constraintStart_toStartOf="@id/inputEditText"
        app:layout_constraintTop_toBottomOf="@+id/inputEditText" />

    <TextView
        android:id="@+id/inputUnitTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:text="cm"
        android:textSize="20sp"
        app:layout_constraintBaseline_toBaselineOf="@id/inputEditText"
        app:layout_constraintStart_toEndOf="@id/inputEditText"
        app:layout_constraintTop_toTopOf="@id/inputEditText" />

    <TextView
        android:id="@+id/outputUnitTextView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:text="m"
        android:textSize="20sp"
        app:layout_constraintBaseline_toBaselineOf="@id/outputTextView"
        app:layout_constraintStart_toEndOf="@id/outputTextView" />

    <ImageButton
        android:id="@+id/swapImageButton"
        android:layout_width="50dp"
        android:layout_height="50dp"
        android:layout_marginStart="16dp"
        android:backgroundTint="#ffffffff"
        android:src="@drawable/ic_baseline_swap_vert_36"
        app:layout_constraintBottom_toBottomOf="@id/outputTextView"
        app:layout_constraintStart_toEndOf="@id/inputUnitTextView"
        app:layout_constraintTop_toTopOf="@id/inputEditText" />

</androidx.constraintlayout.widget.ConstraintLayout>
```

### ğŸ“–MainActivity.kt
```kotlin
import androidx.appcompat.app.AppCompatActivity
import android.os.Bundle
import android.os.PersistableBundle
import android.util.Log
import android.widget.TextView
import androidx.core.widget.addTextChangedListener
import com.example.unittransducersapp.databinding.ActivityMainBinding

class MainActivity : AppCompatActivity() {

    // lateinit í‚¤ì›Œë“œ ì‚¬ìš© ì‹œ, íƒ€ì…ì´ ë°˜ë“œì‹œ ëª…ì‹œë˜ì–´ ìˆì–´ì•¼ í•œë‹¤.
    private lateinit var binding: ActivityMainBinding
    var inputNumber: Int = 0
    var cmToM = true

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        binding = ActivityMainBinding.inflate(layoutInflater)
        val view = binding.root
        setContentView(view)

        val outputTextView = binding.outputTextView
        val outputUnitTextView = binding.outputUnitTextView
        val inputEditText = binding.inputEditText
        val inputUnitTextView = binding.inputUnitTextView
        val swapImageButton = binding.swapImageButton


        inputEditText.addTextChangedListener { text ->
            inputNumber = if (text.isNullOrEmpty()) {
                0
            } else {
                text.toString().toInt()
            }

            if(cmToM) {
                outputTextView.text = inputNumber.times(0.01).toString()
            } else {
                outputTextView.text = inputNumber.times(100).toString()
            }
        }

        swapImageButton.setOnClickListener {
            cmToM = cmToM.not()
            if (cmToM) {
                inputUnitTextView.text = "cm"
                outputUnitTextView.text = "m"
                outputTextView.text = inputNumber.times(0.01).toString()
            } else {
                inputUnitTextView.text = "m"
                outputUnitTextView.text = "cm"
                outputTextView.text = inputNumber.times(100).toString()
            }
        }
    }

    override fun onSaveInstanceState(outState: Bundle) {
        outState.putBoolean("cmToM", cmToM)
        super.onSaveInstanceState(outState)
    }

    override fun onRestoreInstanceState(savedInstanceState: Bundle) {
        cmToM = savedInstanceState.getBoolean("cmToM")
        binding.inputUnitTextView.text = if(cmToM) "cm" else "m"
        binding.outputUnitTextView.text = if(cmToM) "m" else "cm"
        super.onRestoreInstanceState(savedInstanceState)
    }
}
```

## ğŸ“ë§ˆë¬´ë¦¬
ì´ë²ˆ ê³¼ì •ì„ ì§„í–‰í•˜ë©° ë‹¤ì‹œ í•œë²ˆ Activity Lifecycleì€ í™•ì‹¤íˆ ì¡ê³  ê°€ì•¼ í•œë‹¤ëŠ” ìƒê°ì„ í–ˆê³  ì¡°ê¸ˆ ë” ë ˆí¼ëŸ°ìŠ¤ë“¤ì„ ìì£¼, ë” ë§ì´ ë“¤ì—¬ì•¼ ë³´ì•„ì•¼ê² ë‹¤ëŠ” ìƒê°ì„ í•˜ê²Œ ë˜ì—ˆë‹¤. ì´ì œëŠ” ì •ë§ ë¶€ì§€ëŸ°í•´ì§ˆ í•„ìš”ê°€ ìˆìŒì„ ëŠë‚€ë‹¤.